.btn { transition: transform 0.05s ease, filter 0.15s ease; }
.btn:hover { filter: brightness(1.05); }
.btn:active { transform: translateY(1px); }
.btn:disabled { opacity: 0.5; cursor: not-allowed; }

#root { max-width: 1600px; margin: 0 auto; padding: 0.5rem; }
.app { display: flex; flex-direction: column; gap: 1rem; }
.game-view { display: grid; grid-template-columns: minmax(480px, 1fr) 480px; gap: 12px; align-items: start; }
.board { background: transparent; padding: 0; border: none; height: auto; }
/* Keep the inner board perfectly square and as large as possible within viewport */

.board .board-wrap {
	position: relative;
	width: 626px; /* 736 * 0.85 */
	height: 626px; /* 736 * 0.85 */
	margin: 0 auto;
	background: #e7f0f3;
	border-radius: 10px;
	border: 2px solid #2c3e50;
	overflow: hidden;
}
.board .grid {
	position: absolute; inset: 0;
	display: grid;
	/* 11 tracks: 82px outer ring (~96*0.85); gaps reduced proportionally */
	grid-template-columns: 82px repeat(9, 1fr) 82px;
	grid-template-rows: 82px repeat(9, 1fr) 82px;
	gap: 3px;
	width: 100%;
	height: 100%;
}
.tile { background: #fffef5; color: #111; border-radius: 6px; padding: 4px; position: relative; overflow: visible; border: 1px solid #ddd; box-shadow: inset 0 0 0 1px #f2f2e6; min-width: 0; min-height: 0; }
/* Property color stripe positioned on the inner edge */
.tile .stripe { position: absolute; background: transparent; }
.tile .stripe.h { left: 0; right: 0; height: 14px; border-top: 1px solid #999; border-bottom: 1px solid #999; }
.tile .stripe.v { top: 0; bottom: 0; width: 14px; border-left: 1px solid #999; border-right: 1px solid #999; }
.tile .stripe.top { top: 0; }
.tile .stripe.bottom { bottom: 0; }
.tile .stripe.left { left: 0; }
.tile .stripe.right { right: 0; }
.tile .name { font-size: 11px; padding: 2px; text-align: center; line-height: 1.1; word-break: break-word; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; line-clamp: 3; -webkit-box-orient: vertical; }
.tile .tokens { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); display: grid; place-items: center; gap: 5px; }
.tile .token { width: 10px; height: 10px; border-radius: 50%; display: inline-block; border: 1px solid rgba(0,0,0,0.4); box-shadow: 0 1px 2px rgba(0,0,0,0.2); }
.tile .owner { position: absolute; width: 9px; height: 9px; border-radius: 50%; border: 1px solid #444; }
.tile .owner.top { bottom: 100%; left: 50%; transform: translate(-50%, -2px); }
.tile .owner.bottom { top: 100%; left: 50%; transform: translate(-50%, 2px); }
.tile .owner.left { right: 100%; top: 50%; transform: translate(2px, -50%); }
.tile .owner.right { left: 100%; top: 50%; transform: translate(-2px, -50%); }
.tile .buildings-bar { position: absolute; right: 4px; bottom: 4px; background: rgba(0,0,0,0.7); color: #fff; font-size: 11px; padding: 2px 6px; border-radius: 12px; display: inline-flex; align-items: center; gap: 4px; }
.tile .mortgage-stamp { 
  position: absolute; 
  top: 50%; 
  left: 50%; 
  transform: translate(-50%, -50%) rotate(-20deg); 
  background: rgba(220, 38, 38, 0.98); 
  color: white; 
  font-size: 4.2px; 
  font-weight: 900; 
  padding: 1.7px 3.4px; 
  border-radius: 1.7px; 
  border: 0.8px solid #dc2626; 
  letter-spacing: 0.4px; 
  text-shadow: 1px 1px 2px rgba(0,0,0,1); 
  box-shadow: 0 1px 3px rgba(0,0,0,0.8), inset 0 0.5px 1px rgba(255,255,255,0.2); 
  z-index: 10; 
}
.actions { display: flex; flex-direction: column; gap: 8px; position: sticky; top: 8px; }
.actions-panel { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 8px; align-content: start; }
.actions-panel > .ui-labelframe { min-height: 0; }
.main-menu, .lobby-room { background: linear-gradient(180deg, #0f172a 0%, #0b1220 100%); padding: 16px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.06); box-shadow: 0 8px 24px rgba(0,0,0,0.25); color: #e6edf3; }
.main-menu h1 { margin: 0 0 10px; letter-spacing: 0.5px; font-weight: 800; }
.main-menu .connect, .lobby-room .controls { display: flex; flex-direction: column; gap: 10px; align-items: flex-start; }
.main-menu .lobbies { display: flex; flex-direction: column; gap: 10px; }
.main-menu input, .lobby-room input, .lobby-room select { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12); color: #e6edf3; border-radius: 6px; padding: 6px 8px; }
.lobby-room h2, .lobby-room h3 { margin: 6px 0; }
.lobby-room .players { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; padding: 10px; }
.lobby-room .controls .btn { align-self: flex-start; }
.lobby-room .players ul { list-style: none; padding: 0; }
.dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }
.dot.ready { background: #2ecc71; box-shadow: 0 0 0 1px #196f3d inset; }
.dot.not-ready { background: #e74c3c; box-shadow: 0 0 0 1px #922b21 inset; }

/* Highlight current player in Players Overview */
.list-item.current { background: rgba(241, 196, 15, 0.15); border: 1px solid #f1c40f; border-radius: 6px; padding: 3px 6px; }

/* Trades notification badge and jiggle */
.btn-with-badge { position: relative; }
.btn-badge { position: absolute; top: -6px; right: -6px; background: #e74c3c; color: #fff; border-radius: 999px; min-width: 18px; height: 18px; font-size: 11px; display: inline-flex; align-items: center; justify-content: center; padding: 0 5px; border: 2px solid #fff; }
@keyframes jiggle { 0% { transform: translate(0,0) rotate(0); } 20% { transform: translate(1px, -1px) rotate(-2deg); } 40% { transform: translate(-1px, 1px) rotate(2deg); } 60% { transform: translate(1px, 0) rotate(-1deg); } 80% { transform: translate(-1px, 0) rotate(1deg); } 100% { transform: translate(0,0) rotate(0); } }
.jiggle { animation: jiggle 0.6s ease-in-out 1; }
.rent-highlight { background: rgba(241, 196, 15, 0.18); border-radius: 4px; padding: 2px 4px; }
.badge { display: inline-block; padding: 2px 6px; border-radius: 999px; border: 1px solid #ccd5db; font-size: 11px; }

/* Responsive tweaks for smaller screens */
@media (max-width: 1100px) {
	.game-view { grid-template-columns: 1fr; }
}

/* Board embedded overlays */
.board .board-overlay { position: absolute; background: rgba(255,255,255,0.9); border: 1px solid #ccd5db; border-radius: 8px; padding: 6px 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); max-width: 42%; }
.board .board-overlay .bo-title { font-size: 11px; font-weight: 700; margin-bottom: 4px; color: #2c3e50; }
.board .board-overlay .bo-body { font-size: 12px; }
.board .board-overlay.top-left { top: 8px; left: 8px; }
.board .board-overlay.top-right { top: 8px; right: 8px; }
.board .board-overlay.bottom-left { bottom: 8px; left: 8px; }
.board .board-overlay.bottom-right { bottom: 8px; right: 8px; }
